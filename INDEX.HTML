<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLIT-HUB | Learn. Connect. Trade.</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#10b981">
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SLIT-HUB">
    <link rel="apple-touch-icon" href="https://ui-avatars.com/api/?name=SH&background=10b981&color=fff&size=192">
    
    <!-- Load Firebase SDK properly -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* ========== PROFESSIONAL DESIGN SYSTEM ========== */
        :root { 
            --primary: #10b981;
            --primary-dark: #059669;
            --primary-light: #34d399;
            --primary-glow: rgba(16, 185, 129, 0.3);
            --secondary: #6366f1;
            --accent: #8b5cf6;
            --bg: #f8fafc; 
            --card: #ffffff; 
            --text: #1e293b; 
            --text-light: #334155;
            --text-muted: #64748b;
            --border: #e2e8f0; 
            --input-bg: #f1f5f9;
            --nav-text: #64748b;
            --danger: #ef4444;
            --danger-light: #fee2e2;
            --warning: #f59e0b;
            --success: #10b981;
            --info: #3b82f6;
            --gold: #fbbf24;
            --gold-dark: #f59e0b;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        html.dark { 
            --bg: #0f172a; 
            --card: #1e293b; 
            --text: #f8fafc; 
            --text-light: #cbd5e1;
            --text-muted: #94a3b8;
            --border: #334155; 
            --input-bg: #1e293b;
            --nav-text: #94a3b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body { 
            padding-bottom: 90px;
            background: var(--bg);
            color: var(--text); 
            transition: background 0.3s ease, color 0.3s ease; 
            font-family: 'Plus Jakarta Sans', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* ========== TYPOGRAPHY ========== */
        h1 { font-size: 2rem; font-weight: 800; letter-spacing: -0.02em; }
        h2 { font-size: 1.5rem; font-weight: 700; letter-spacing: -0.01em; }
        h3 { font-size: 1.25rem; font-weight: 600; }
        p { font-size: 0.95rem; color: var(--text-light); line-height: 1.5; }

        /* ========== TEXT COLORS ========== */
        .text-default { color: var(--text) !important; }
        .text-light { color: var(--text-light) !important; }
        .text-muted { color: var(--text-muted) !important; }
        .bg-card { background-color: var(--card) !important; }
        .border-base { border-color: var(--border) !important; }
        .bg-input { background-color: var(--input-bg) !important; }

        /* ========== INPUT STYLES ========== */
        input, textarea, select {
            background-color: var(--input-bg) !important;
            color: var(--text) !important;
            border: 1px solid var(--border) !important;
            border-radius: 12px !important;
            padding: 12px 16px !important;
            font-size: 0.95rem !important;
            transition: all 0.2s ease !important;
            width: 100%;
        }
        input:focus, textarea:focus, select:focus {
            outline: none !important;
            border-color: var(--primary) !important;
            box-shadow: 0 0 0 3px var(--primary-glow) !important;
        }
        input::placeholder, textarea::placeholder {
            color: var(--text-muted) !important;
            opacity: 0.7;
        }
        .input-error {
            border-color: var(--danger) !important;
        }
        .error-message {
            color: var(--danger);
            font-size: 0.75rem;
            margin-top: 4px;
            display: none;
        }

        /* ========== PHONE INPUT ========== */
        .phone-input-container {
            display: flex;
            align-items: center;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }
        .phone-prefix {
            background: var(--primary);
            color: white;
            padding: 12px 16px;
            font-weight: 600;
            border-right: 1px solid var(--border);
        }
        .phone-input-container input {
            border: none !important;
            border-radius: 0 !important;
            flex: 1;
        }

        /* ========== BRANDING ========== */
        .brand-logo {
            font-weight: 800;
            letter-spacing: -1.5px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 4px rgba(16, 185, 129, 0.2));
            cursor: pointer;
            transition: transform 0.2s;
        }
        .brand-logo:active { transform: scale(0.95); }

        .tagline {
            font-size: 0.75rem;
            color: var(--text-muted);
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        /* ========== BUTTONS ========== */
        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        .btn:active::after {
            width: 200px;
            height: 200px;
        }
        .btn:active {
            transform: scale(0.96);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 4px 15px var(--primary-glow);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--primary-glow);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
        }
        .btn-outline:hover {
            background: var(--input-bg);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }
        .btn-whatsapp:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.3);
        }

        .btn-call {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }
        .btn-call:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .btn-loading {
            position: relative;
            color: transparent !important;
        }
        .btn-loading::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid white;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ========== BADGES ========== */
        .gold-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            gap: 6px;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);
        }

        .gold-check {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 11px;
            margin-left: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .blue-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            gap: 6px;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .blue-check {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 11px;
            margin-left: 4px;
        }

        .verified-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            gap: 6px;
        }

        .unverified-badge {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #9ca3af, #6b7280);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            gap: 6px;
        }

        /* ========== CARDS ========== */
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
            cursor: pointer;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .product-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: var(--shadow);
        }
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        /* ========== NAVIGATION ========== */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card);
            border-top: 1px solid var(--border);
            padding: 8px 16px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 50;
            backdrop-filter: blur(10px);
            box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--nav-text);
            transition: all 0.2s;
            font-size: 0.7rem;
            font-weight: 500;
            cursor: pointer;
            background: none;
            border: none;
            padding: 8px 12px;
            border-radius: 12px;
        }
        .nav-item i {
            font-size: 1.3rem;
            transition: transform 0.2s;
        }
        .nav-item:hover {
            color: var(--primary);
            background: var(--input-bg);
        }
        .nav-item:hover i {
            transform: translateY(-2px);
        }
        .nav-item.active-nav {
            color: var(--primary);
            background: var(--primary-glow);
        }
        .nav-item.active-nav i {
            transform: scale(1.1);
        }

        /* ========== TABS ========== */
        .tabs {
            display: flex;
            gap: 0.5rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            white-space: nowrap;
            scrollbar-width: none;
        }
        .tabs::-webkit-scrollbar {
            display: none;
        }
        .tab {
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 30px;
            transition: all 0.2s;
            background: none;
            border: none;
            font-size: 0.9rem;
        }
        .tab:hover {
            background: var(--input-bg);
            color: var(--text);
        }
        .tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px var(--primary-glow);
        }

        /* ========== NOTIFICATIONS ========== */
        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            font-weight: bold;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
            border: 2px solid var(--card);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .toast {
            position: fixed;
            bottom: 100px;
            left: 20px;
            right: 20px;
            background: var(--card);
            border-left: 4px solid var(--primary);
            border-radius: 16px;
            padding: 16px;
            box-shadow: var(--shadow-xl);
            z-index: 10000;
            animation: slideUp 0.3s ease;
            cursor: pointer;
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* ========== SCAM WARNING ========== */
        .scam-warning {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border-left: 4px solid #ef4444;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
            color: #7f1d1d;
        }
        .dark .scam-warning {
            background: linear-gradient(135deg, #7f1d1d, #991b1b);
            color: #fee2e2;
        }

        /* ========== LEVEL BADGES ========== */
        .level-badge {
            display: inline-flex;
            padding: 2px 10px;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 700;
            color: white;
            margin-left: 4px;
        }
        .level-100 { background: #3b82f6; }
        .level-200 { background: #10b981; }
        .level-300 { background: #f59e0b; }
        .level-400 { background: #ef4444; }
        .level-500 { background: #8b5cf6; }

        /* ========== GRID ========== */
        .grid-2, .grid-3, .grid-4 {
            display: grid;
            gap: 1.5rem;
        }
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }

        @media (max-width: 768px) {
            .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
        }

        .hidden {
            display: none !important;
        }

        /* ========== MODAL ========== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            z-index: 100000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
            animation: fadeIn 0.2s ease;
        }
        .modal-content {
            background: var(--card);
            border-radius: 24px;
            padding: 24px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: scaleIn 0.3s ease;
            box-shadow: var(--shadow-xl);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* ========== INSTALL BUTTON ========== */
        #install-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 50px;
            padding: 14px 28px;
            font-weight: bold;
            box-shadow: 0 4px 20px var(--primary-glow);
            cursor: pointer;
            z-index: 9999;
            display: none;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        #install-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px var(--primary-glow);
        }

        /* ========== RATING STARS ========== */
        .star-rating {
            display: flex;
            gap: 4px;
        }
        .star-rating i {
            color: #fbbf24;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .star-rating i:hover {
            transform: scale(1.2);
        }
        .star-rating i.inactive {
            color: var(--border);
        }

        /* ========== PRICE FORMATTING ========== */
        .price-input {
            position: relative;
        }
        .price-input input {
            padding-left: 30px !important;
        }
        .price-input::before {
            content: '‚Ç¶';
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-weight: 600;
            z-index: 1;
        }

        /* ========== LOADING SKELETON ========== */
        .skeleton {
            background: linear-gradient(90deg, var(--border) 25%, var(--input-bg) 50%, var(--border) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 8px;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* ========== PRIVACY TOGGLE ========== */
        .privacy-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        .privacy-toggle input {
            width: auto;
            margin-right: 4px;
        }

        /* ========== DELETE BUTTON ========== */
        .delete-btn {
            color: #ef4444;
            cursor: pointer;
            transition: all 0.2s;
            background: none;
            border: none;
            font-size: 1.2rem;
        }
        .delete-btn:hover {
            color: #dc2626;
            transform: scale(1.1);
        }

        .edit-btn {
            color: #3b82f6;
            cursor: pointer;
            transition: all 0.2s;
            background: none;
            border: none;
            font-size: 1.2rem;
        }
        .edit-btn:hover {
            color: #2563eb;
            transform: scale(1.1);
        }

        .profile-action-btn {
            position: absolute;
            background: white;
            border: 2px solid var(--border);
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: var(--shadow);
        }
        .profile-action-btn:hover {
            transform: scale(1.1);
        }

        /* ========== USER CARD ========== */
        .user-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--input-bg);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .user-card:hover {
            background: var(--border);
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
        }

        /* ========== CREATOR PORTFOLIO ========== */
        .creator-portfolio-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .creator-portfolio-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 30px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-card border-b border-base p-4 backdrop-blur-md">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="brand-logo text-2xl" id="logo">SLIT-HUB</h1>
                <p class="tagline hidden md:block">Learn. Connect. Trade. ‚Äî Everything SLIT, One Place</p>
            </div>
            <div class="flex items-center gap-3">
                <!-- Creator's Portfolio Link (Visible to everyone) -->
                <a href="#" id="creator-portfolio-link" target="_blank" class="hidden md:flex items-center gap-2 text-primary hover:underline">
                    <i class="fas fa-briefcase"></i> Creator's Portfolio
                </a>
                <button id="dark-mode-toggle" class="w-10 h-10 rounded-xl bg-input flex items-center justify-center hover:bg-opacity-80 transition">
                    <i class="fas fa-moon" id="dark-icon"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Global Broadcast -->
    <div id="global-broadcast" class="hidden bg-warning text-white p-2 text-center font-bold cursor-pointer" onclick="showBroadcastDetails()">
        <i class="fas fa-bullhorn"></i> <span id="broadcast-message"></span>
    </div>

    <!-- Main Navigation Tabs -->
    <div class="max-w-7xl mx-auto px-4 mt-4">
        <div class="tabs">
            <button class="tab active" data-tab="home">üè† Home</button>
            <button class="tab" data-tab="academics">üìö Learn</button>
            <button class="tab" data-tab="community">üë• Connect</button>
            <button class="tab" data-tab="marketplace">üõçÔ∏è Trade</button>
            <button class="tab" data-tab="profile">üë§ Profile</button>
            <button class="tab" data-tab="manager">üìã Manager</button>
            <button class="tab" data-tab="admin">‚öôÔ∏è Admin</button>
        </div>
    </div>

    <main class="max-w-7xl mx-auto p-4">
        
        <!-- HOME TAB -->
        <section id="home-tab" class="tab-content">
            <div class="mb-8">
                <h2 class="text-2xl font-bold">Welcome back, <span id="home-user-name">Student</span>!</h2>
                <p class="text-muted" id="home-user-details">SLIT ‚Ä¢ Set your department in profile</p>
            </div>

            <!-- Quick Stats - Clickable -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="card text-center" data-nav="academics">
                    <div class="text-4xl mb-2 text-primary">üìö</div>
                    <div class="text-2xl font-bold" id="stat-courses">0</div>
                    <div class="text-xs text-muted">Courses</div>
                </div>
                <div class="card text-center" data-nav="community">
                    <div class="text-4xl mb-2 text-warning">üì¢</div>
                    <div class="text-2xl font-bold" id="stat-announcements">0</div>
                    <div class="text-xs text-muted">Announcements</div>
                </div>
                <div class="card text-center" data-nav="marketplace">
                    <div class="text-4xl mb-2 text-success">üõçÔ∏è</div>
                    <div class="text-2xl font-bold" id="stat-items">0</div>
                    <div class="text-xs text-muted">Items for Sale</div>
                </div>
                <div class="card text-center" data-nav="community">
                    <div class="text-4xl mb-2 text-info">üë•</div>
                    <div class="text-2xl font-bold" id="stat-execs">0</div>
                    <div class="text-xs text-muted">Executives</div>
                </div>
            </div>

            <!-- Today's Schedule -->
            <div class="card mb-8" data-nav="academics">
                <h3 class="font-bold mb-4 flex items-center gap-2">
                    <i class="fas fa-calendar-day text-primary"></i> Today's Schedule
                </h3>
                <div id="today-schedule" class="space-y-3">
                    <p class="text-muted text-center py-4">Click to view your timetable</p>
                </div>
            </div>

            <!-- Latest Announcements -->
            <div class="card" data-nav="community">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold flex items-center gap-2">
                        <i class="fas fa-bullhorn text-primary"></i> Latest Announcements
                    </h3>
                    <span class="text-primary hover:underline">View All ‚Üí</span>
                </div>
                <div id="home-announcements" class="space-y-3"></div>
            </div>
        </section>

        <!-- ACADEMICS TAB -->
        <section id="academics-tab" class="tab-content hidden">
            <div class="mb-6">
                <h2 class="text-2xl font-bold">üìö Learn</h2>
                <p class="text-muted">School of Logistics and Innovation Technology</p>
            </div>

            <!-- Department Selector -->
            <div class="card mb-6">
                <label class="block text-sm font-bold mb-2">Your Department</label>
                <select id="academics-dept" class="input-field w-full md:w-96">
                    <option value="">Select Department</option>
                </select>
            </div>

            <!-- Quick Access Cards - Clickable -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="card text-center" data-academics="lecture">
                    <div class="text-4xl mb-2">üìñ</div>
                    <div class="font-bold">Lectures</div>
                    <div class="text-xs text-muted">Weekly schedule</div>
                </div>
                <div class="card text-center" data-academics="test">
                    <div class="text-4xl mb-2">üìù</div>
                    <div class="font-bold">Tests</div>
                    <div class="text-xs text-muted">Upcoming tests</div>
                </div>
                <div class="card text-center" data-academics="exam">
                    <div class="text-4xl mb-2">üìã</div>
                    <div class="font-bold">Exams</div>
                    <div class="text-xs text-muted">Exam schedule</div>
                </div>
                <div class="card text-center" data-academics="materials">
                    <div class="text-4xl mb-2">üìö</div>
                    <div class="font-bold">Materials</div>
                    <div class="text-xs text-muted">Past questions</div>
                </div>
            </div>

            <!-- Timetable Display -->
            <div id="timetable-container" class="card mb-8 hidden">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="timetable-title" class="font-bold">Lecture Timetable</h3>
                    <button id="hide-timetable" class="text-muted hover:text-danger"><i class="fas fa-times"></i></button>
                </div>
                <div id="timetable-content" class="space-y-3"></div>
            </div>

            <!-- Study Groups (Pending Approval) -->
            <div class="card mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold flex items-center gap-2">
                        <i class="fas fa-users text-primary"></i> Study Groups
                    </h3>
                    <button class="btn-primary text-sm py-2" id="create-study-group">+ Create Group</button>
                </div>
                <div id="study-groups" class="space-y-3"></div>
            </div>

            <!-- Course Materials -->
            <div class="card">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold flex items-center gap-2">
                        <i class="fas fa-folder-open text-primary"></i> Course Materials
                    </h3>
                    <button class="btn-primary text-sm py-2" id="upload-material">+ Upload</button>
                </div>
                <div id="materials-list" class="space-y-3"></div>
            </div>
        </section>

        <!-- COMMUNITY TAB -->
        <section id="community-tab" class="tab-content hidden">
            <div class="mb-6">
                <h2 class="text-2xl font-bold">üë• Connect</h2>
                <p class="text-muted">Stay connected with your department community</p>
            </div>

            <!-- Creator Portfolio (Visible to everyone) -->
            <div id="creator-portfolio-display" class="creator-portfolio-card hidden">
                <a href="#" id="display-portfolio-link" target="_blank" class="flex items-center gap-4">
                    <img id="display-portfolio-image" src="" alt="Creator's Work" class="w-16 h-16 rounded-full object-cover border-2 border-white">
                    <div>
                        <h3 class="font-bold text-xl">üé® Creator's Portfolio</h3>
                        <p class="text-sm opacity-90">Check out my other work ‚Üí</p>
                    </div>
                </a>
            </div>

            <!-- Announcement Categories -->
            <div class="flex gap-2 overflow-x-auto pb-4 mb-6 scrollbar-hide">
                <button class="category-btn px-4 py-2 bg-primary text-white rounded-full text-sm font-bold" data-category="all">All</button>
                <button class="category-btn px-4 py-2 bg-card border border-base rounded-full text-sm" data-category="sports">‚öΩ Sports</button>
                <button class="category-btn px-4 py-2 bg-card border border-base rounded-full text-sm" data-category="social">üéâ Social</button>
                <button class="category-btn px-4 py-2 bg-card border border-base rounded-full text-sm" data-category="academic">üìö Academic</button>
                <button class="category-btn px-4 py-2 bg-card border border-base rounded-full text-sm" data-category="media">üì∏ Media</button>
            </div>

            <!-- Executive Post Card (Visible to executives and course reps) -->
            <div id="executive-post-card" class="card mb-6 hidden">
                <div class="flex items-center gap-2 mb-4">
                    <i class="fas fa-pen-fancy text-primary text-xl"></i>
                    <span class="font-bold">Post Announcement</span>
                    <span id="executive-badge" class="gold-badge ml-auto"><i class="fas fa-check-circle"></i> Executive</span>
                </div>
                <div class="space-y-3">
                    <select id="announce-category" class="input-field">
                        <option value="sports">‚öΩ Sports</option>
                        <option value="social">üéâ Social</option>
                        <option value="academic">üìö Academic</option>
                        <option value="media">üì∏ Media</option>
                    </select>
                    
                    <!-- Targeting Options -->
                    <select id="announce-target-type" class="input-field">
                        <option value="all">All Students</option>
                        <option value="level">Specific Level</option>
                        <option value="department">Specific Department</option>
                        <option value="course">Specific Course</option>
                    </select>
                    
                    <div id="level-select" class="hidden">
                        <select id="announce-level" class="input-field">
                            <option value="100">100 Level</option>
                            <option value="200">200 Level</option>
                            <option value="300">300 Level</option>
                            <option value="400">400 Level</option>
                            <option value="500">500 Level</option>
                        </select>
                    </div>
                    
                    <input type="text" id="announce-title" placeholder="Title" class="input-field">
                    <textarea id="announce-content" placeholder="Content..." rows="3" class="input-field"></textarea>
                    
                    <!-- Announcement Type -->
                    <select id="announce-type" class="input-field">
                        <option value="general">üì¢ General</option>
                        <option value="assignment">üìù Assignment</option>
                        <option value="event">üìÖ Event</option>
                        <option value="urgent">‚ö†Ô∏è Urgent</option>
                    </select>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <input type="text" id="announce-link" placeholder="Link (optional)" class="input-field">
                        <input type="date" id="announce-date" class="input-field">
                    </div>
                    
                    <input type="text" id="announce-location" placeholder="Location/Venue (optional)" class="input-field">
                    
                    <div class="flex items-center gap-2">
                        <input type="checkbox" id="announce-pin" class="w-4 h-4">
                        <label class="text-sm">Pin this announcement</label>
                    </div>
                    
                    <button class="btn-primary w-full" id="publish-announcement">Publish Announcement</button>
                </div>
            </div>

            <!-- Announcements Feed -->
            <div id="announcements-feed" class="space-y-4 mb-8"></div>

            <!-- Executives Directory -->
            <div class="card mb-8">
                <h3 class="font-bold mb-4">Department Executives</h3>
                <div id="executives-directory" class="space-y-3"></div>
            </div>
        </section>

        <!-- MARKETPLACE TAB -->
        <section id="marketplace-tab" class="tab-content hidden">
            <div class="mb-6">
                <h2 class="text-2xl font-bold">üõçÔ∏è Trade</h2>
                <p class="text-muted">Buy, sell, and request services on campus</p>
            </div>

            <!-- Scam Warning -->
            <div class="scam-warning mb-6">
                <div class="flex items-start gap-3">
                    <i class="fas fa-shield-alt text-2xl"></i>
                    <div>
                        <p class="font-bold mb-1">‚ö†Ô∏è Safety Tips:</p>
                        <p class="text-sm">‚Ä¢ Meet in public places (library, cafeteria)</p>
                        <p class="text-sm">‚Ä¢ Never send money in advance</p>
                        <p class="text-sm">‚Ä¢ Inspect items before payment</p>
                        <p class="text-sm">‚Ä¢ Report suspicious users immediately</p>
                    </div>
                </div>
            </div>

            <!-- Marketplace Sub-tabs -->
            <div class="flex gap-2 border-b border-base mb-6">
                <button class="sub-tab px-4 py-2 font-bold text-primary border-b-2 border-primary" data-marketplace="shop">üõí Shop</button>
                <button class="sub-tab px-4 py-2 text-muted" data-marketplace="services">üõ†Ô∏è Services</button>
                <button class="sub-tab px-4 py-2 text-muted" data-marketplace="requests">üôã Requests</button>
            </div>

            <!-- Shop Section -->
            <div id="shop-section" class="marketplace-section">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold">Recent Items</h3>
                    <button class="btn-primary text-sm py-2" id="sell-item">+ Sell Item</button>
                </div>
                <div id="product-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
            </div>

            <!-- Services Section -->
            <div id="services-section" class="marketplace-section hidden">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold">Campus Services</h3>
                    <button class="btn-primary text-sm py-2" id="list-service">+ List Service</button>
                </div>
                <div id="services-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>

            <!-- Requests Section -->
            <div id="requests-section" class="marketplace-section hidden">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold">Community Requests</h3>
                    <button class="btn-primary text-sm py-2" id="new-request">+ New Request</button>
                </div>
                <div id="requests-grid" class="space-y-4"></div>
            </div>
        </section>

        <!-- PROFILE TAB -->
        <section id="profile-tab" class="tab-content hidden max-w-2xl mx-auto">
            <div class="card">
                <div class="text-center mb-8">
                    <div class="relative inline-block">
                        <img id="profile-pic" src="https://ui-avatars.com/api/?name=User&background=10b981&color=fff&size=128" class="w-28 h-28 rounded-full mx-auto border-4 border-white shadow-lg cursor-pointer" id="change-profile-pic">
                        <button id="upload-profile-pic" class="absolute bottom-0 right-0 bg-primary text-white p-2.5 rounded-full text-xs border-2 border-white hover:bg-primary-dark transition" style="width: 36px; height: 36px;">
                            <i class="fas fa-camera"></i>
                        </button>
                        <button id="delete-profile-pic" class="absolute bottom-0 left-0 bg-danger text-white p-2.5 rounded-full text-xs border-2 border-white hover:bg-red-700 transition" style="width: 36px; height: 36px;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <input type="file" id="profile-upload" class="hidden" accept="image/*">
                    
                    <h2 id="profile-name" class="text-2xl font-bold mt-4">Your Name</h2>
                    <p class="text-sm text-muted">ID: <span id="profile-id"></span></p>
                    
                    <!-- Badges & Verification Status -->
                    <div id="profile-badges" class="flex justify-center gap-2 mt-2 flex-wrap"></div>
                    <div id="profile-verification-status" class="mt-2"></div>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-bold mb-1">Full Name <span class="text-danger">*</span></label>
                        <input type="text" id="profile-name-input" class="input-field" placeholder="Enter your full name">
                        <div class="error-message" id="name-error">Name is required</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold mb-1">Email <span class="text-danger">*</span></label>
                        <input type="email" id="profile-email" class="input-field" placeholder="your.email@university.edu.ng">
                    </div>
                    
                    <!-- Phone with +234 prefix -->
                    <div>
                        <label class="block text-sm font-bold mb-1">Phone Number</label>
                        <div class="phone-input-container">
                            <span class="phone-prefix">+234</span>
                            <input type="tel" id="profile-phone" class="input-field" placeholder="8012345678">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold mb-1">Department</label>
                        <select id="profile-dept" class="input-field"></select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold mb-1">Level</label>
                        <select id="profile-level" class="input-field">
                            <option value="">Select Level</option>
                            <option value="100">100 Level</option>
                            <option value="200">200 Level</option>
                            <option value="300">300 Level</option>
                            <option value="400">400 Level</option>
                            <option value="500">500 Level</option>
                        </select>
                    </div>
                    
                    <!-- Privacy Settings -->
                    <div class="border-t border-base pt-4">
                        <h3 class="font-bold mb-3">üîí Privacy Settings</h3>
                        <div class="space-y-2">
                            <label class="privacy-toggle flex items-center">
                                <input type="checkbox" id="hide-email" class="w-4 h-4 mr-2">
                                <span class="text-sm">Hide my email from other users</span>
                            </label>
                            <label class="privacy-toggle flex items-center">
                                <input type="checkbox" id="hide-dept" class="w-4 h-4 mr-2">
                                <span class="text-sm">Hide my department from other users</span>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold mb-1">Bio</label>
                        <textarea id="profile-bio" rows="3" class="input-field" placeholder="Tell us about yourself..."></textarea>
                    </div>

                    <button class="btn-primary w-full" id="save-profile">
                        <i class="fas fa-save"></i> Save Profile
                    </button>

                    <!-- Contact Developer/Admin -->
                    <div class="border-t border-base pt-4 mt-4">
                        <h3 class="font-bold mb-3">Need Help?</h3>
                        <div class="flex gap-3">
                            <a href="https://wa.me/2348053103234" target="_blank" class="flex-1 btn-whatsapp py-3 rounded-xl font-bold flex items-center justify-center gap-2">
                                <i class="fab fa-whatsapp"></i> Contact Developer
                            </a>
                            <button class="flex-1 btn-primary py-3 rounded-xl font-bold flex items-center justify-center gap-2" id="contact-admin">
                                <i class="fas fa-envelope"></i> Message Admin
                            </button>
                        </div>
                    </div>

                    <!-- Creator's Portfolio Section (Only you can edit) -->
                    <div id="creator-section" class="border-t border-base pt-4 mt-4 hidden">
                        <h3 class="font-bold mb-3 text-primary">üé® Manage Your Portfolio</h3>
                        <div class="flex gap-3">
                            <input type="text" id="portfolio-url" class="input-field flex-1" placeholder="Portfolio URL" value="https://yourportfolio.com">
                        </div>
                        <div class="flex gap-3 mt-2">
                            <input type="text" id="portfolio-image" class="input-field flex-1" placeholder="Portfolio Image URL (optional)">
                        </div>
                        <div class="flex gap-2 mt-3">
                            <button class="btn-primary flex-1" id="save-portfolio">Save Portfolio</button>
                            <button class="btn-danger flex-1" id="delete-portfolio">Delete Portfolio</button>
                        </div>
                    </div>

                    <!-- Upload ID for Verification -->
                    <div class="border-t border-base pt-4 mt-4">
                        <h3 class="font-bold mb-3 text-green-600">‚úÖ Get Verified</h3>
                        <button class="w-full btn-success py-3 rounded-xl font-bold flex items-center justify-center gap-2" id="request-verification">
                            <i class="fas fa-id-card"></i> Upload Student ID for Verification
                        </button>
                        <input type="file" id="id-upload" class="hidden" accept="image/*">
                    </div>

                    <!-- Upload Course Materials (for Course Reps) -->
                    <div id="course-rep-upload" class="border-t border-base pt-4 mt-4 hidden">
                        <h3 class="font-bold mb-3 text-blue-600">üìò Course Rep Tools</h3>
                        <button class="w-full btn-primary py-3 rounded-xl font-bold flex items-center justify-center gap-2" id="rep-upload-material">
                            <i class="fas fa-upload"></i> Upload Course Materials
                        </button>
                    </div>

                    <!-- Delete Profile -->
                    <div class="border-t border-base pt-4 mt-4">
                        <button class="w-full btn-danger py-3 rounded-xl font-bold flex items-center justify-center gap-2" id="delete-profile">
                            <i class="fas fa-trash"></i> Delete Profile
                        </button>
                        <p class="text-xs text-muted text-center mt-2">This action cannot be undone</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- MANAGER TAB (My Items) -->
        <section id="manager-tab" class="tab-content hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">üìã My Items</h2>
                <button class="btn-primary text-sm py-2" id="add-new-item">+ Add New</button>
            </div>
            
            <!-- My Products -->
            <div class="mb-8">
                <h3 class="font-bold mb-4">My Products</h3>
                <div id="my-products-grid" class="grid grid-cols-1 gap-4"></div>
            </div>
            
            <!-- My Services -->
            <div class="mb-8">
                <h3 class="font-bold mb-4">My Services</h3>
                <div id="my-services-grid" class="grid grid-cols-1 gap-4"></div>
            </div>
            
            <!-- My Requests -->
            <div class="mb-8">
                <h3 class="font-bold mb-4">My Requests</h3>
                <div id="my-requests-grid" class="grid grid-cols-1 gap-4"></div>
            </div>
            
            <!-- My Study Groups -->
            <div class="mb-8">
                <h3 class="font-bold mb-4">My Study Groups</h3>
                <div id="my-study-groups-grid" class="grid grid-cols-1 gap-4"></div>
            </div>
            
            <!-- My Announcements (for Executives) -->
            <div id="my-announcements-section" class="mb-8 hidden">
                <h3 class="font-bold mb-4">My Announcements</h3>
                <div id="my-announcements-grid" class="grid grid-cols-1 gap-4"></div>
            </div>
        </section>

        <!-- ADMIN TAB -->
        <section id="admin-tab" class="tab-content hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">‚öôÔ∏è Admin Dashboard</h2>
                <button id="admin-toggle" class="px-4 py-2 bg-card border border-base rounded-xl text-sm hover:bg-input transition">
                    <i class="fas fa-lock"></i> Admin: OFF
                </button>
            </div>

            <!-- Admin Panel -->
            <div id="admin-panel" class="hidden space-y-6">
                
                <!-- Quick Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-gradient-to-r from-green-600 to-emerald-600 p-4 rounded-xl text-white shadow-lg">
                        <div class="text-3xl font-bold" id="admin-stat-depts">0</div>
                        <div class="text-sm opacity-90">Departments</div>
                    </div>
                    <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 p-4 rounded-xl text-white shadow-lg">
                        <div class="text-3xl font-bold" id="admin-stat-execs">0</div>
                        <div class="text-sm opacity-90">Executives</div>
                    </div>
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-4 rounded-xl text-white shadow-lg">
                        <div class="text-3xl font-bold" id="admin-stat-users">0</div>
                        <div class="text-sm opacity-90">Users</div>
                    </div>
                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 p-4 rounded-xl text-white shadow-lg">
                        <div class="text-3xl font-bold" id="admin-stat-products">0</div>
                        <div class="text-sm opacity-90">Products</div>
                    </div>
                </div>

                <!-- Study Group Approval Queue -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-purple-600">‚è≥ Pending Study Groups</h3>
                    <div id="pending-groups-list" class="space-y-3"></div>
                </div>

                <!-- Content Moderation -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-red-600">üõ°Ô∏è Content Moderation</h3>
                    
                    <div class="mb-4">
                        <select id="moderation-type" class="input-field">
                            <option value="products">Products</option>
                            <option value="services">Services</option>
                            <option value="requests">Requests</option>
                            <option value="announcements">Announcements</option>
                        </select>
                    </div>
                    
                    <div id="moderation-list" class="space-y-3 max-h-96 overflow-y-auto"></div>
                </div>

                <!-- Creator Portfolio Management (Only you can see) -->
                <div id="admin-creator-section" class="card hidden">
                    <h3 class="font-bold mb-4 text-primary">üé® Creator Portfolio Management</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                        <input type="text" id="admin-portfolio-url" placeholder="Portfolio URL" class="input-field">
                        <input type="text" id="admin-portfolio-image" placeholder="Portfolio Image URL (optional)" class="input-field">
                    </div>
                    <button class="btn-primary" id="admin-save-portfolio">Save Portfolio Links</button>
                </div>

                <!-- Global Broadcast -->
                <div class="bg-gradient-to-r from-primary to-emerald-600 p-6 rounded-2xl text-white shadow-lg">
                    <h3 class="font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-bullhorn"></i> Global Broadcast
                    </h3>
                    <textarea id="global-broadcast-input" class="w-full p-3 rounded-xl text-gray-900 mb-3" rows="2" placeholder="Type broadcast message..."></textarea>
                    <div class="flex gap-3">
                        <button class="bg-white text-primary px-6 py-2 rounded-xl font-bold hover:shadow-lg transition" id="send-broadcast">
                            <i class="fas fa-paper-plane"></i> Send
                        </button>
                        <button class="bg-red-500 text-white px-6 py-2 rounded-xl font-bold hover:bg-red-600 transition" id="delete-broadcast">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>

                <!-- Admin Messages -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-blue-600">üì® User Messages</h3>
                    <div id="admin-messages-list" class="space-y-3 max-h-60 overflow-y-auto"></div>
                </div>

                <!-- User Verification Management -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-green-600">‚úÖ Verification Requests</h3>
                    <div id="verification-list" class="space-y-3"></div>
                </div>

                <!-- All Users (Admin Only) -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-blue-600">üë• All Users</h3>
                    <div id="member-directory-admin" class="space-y-3 max-h-96 overflow-y-auto"></div>
                </div>

                <!-- Department Management -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-primary">üèõÔ∏è Department Management</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-4">
                        <input type="text" id="dept-name" placeholder="Department Name" class="input-field">
                        <input type="text" id="dept-code" placeholder="Code" class="input-field">
                        <button class="btn-primary" id="add-dept">
                            <i class="fas fa-plus"></i> Add
                        </button>
                    </div>
                    
                    <div id="depts-list" class="space-y-2 max-h-60 overflow-y-auto"></div>
                </div>

                <!-- Executive Management -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-yellow-600">‚≠ê Executive Management</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                        <select id="exec-dept" class="input-field">
                            <option value="">Select Department</option>
                        </select>
                        <input type="text" id="exec-name" placeholder="Full Name" class="input-field">
                        <input type="text" id="exec-position" placeholder="Position" class="input-field">
                        <input type="email" id="exec-email" placeholder="Email" class="input-field">
                        <select id="exec-level" class="input-field">
                            <option value="faculty">üëë Faculty Executive</option>
                            <option value="department">‚≠ê Department Executive</option>
                            <option value="course">üìò Course Rep</option>
                        </select>
                        <button class="btn-warning col-span-2" id="add-exec">
                            <i class="fas fa-plus"></i> Add Executive
                        </button>
                    </div>
                    
                    <div id="execs-list" class="space-y-2 max-h-60 overflow-y-auto"></div>
                </div>

                <!-- Reports -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-red-600">‚ö†Ô∏è User Reports</h3>
                    <div id="reports-list" class="space-y-3"></div>
                </div>

                <!-- Banned Users -->
                <div class="card">
                    <h3 class="font-bold mb-4 text-gray-600">üö´ Banned Users</h3>
                    <div id="banned-users-list" class="space-y-3"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="nav-bar">
        <button class="nav-item" data-nav="home">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </button>
        <button class="nav-item" data-nav="academics">
            <i class="fas fa-book-open"></i>
            <span>Learn</span>
        </button>
        <button class="nav-item" data-nav="community">
            <i class="fas fa-users"></i>
            <span>Connect</span>
        </button>
        <button class="nav-item" data-nav="marketplace">
            <i class="fas fa-store"></i>
            <span>Trade</span>
        </button>
        <button class="nav-item" data-nav="profile">
            <i class="fas fa-user-circle"></i>
            <span>Profile</span>
        </button>
        <button class="nav-item" data-nav="manager">
            <i class="fas fa-clipboard-list"></i>
            <span>Manager</span>
        </button>
    </nav>

    <!-- Install Button -->
    <button id="install-btn">
        <i class="fas fa-download"></i> Install Slit-Hub
    </button>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script>
        // ============ FIREBASE CONFIG ============
        const firebaseConfig = {
            apiKey: "AIzaSyCpsDTN-NTkTFmbwg3T6vv9H4eE_YXQdZA",
            authDomain: "slit-hub.firebaseapp.com",
            projectId: "slit-hub",
            storageBucket: "slit-hub.firebasestorage.app",
            messagingSenderId: "347194010969",
            appId: "1:347194010969:web:a45af2e8d1627ac2593048"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ============ GLOBALS ============
        let currentUserId = localStorage.getItem('slit_user_id') || 'user_' + Date.now();
        localStorage.setItem('slit_user_id', currentUserId);
        
        const CREATOR_USER_ID = "creator_slit_hub_admin";
        let isAdminMode = false;
        let currentUserData = null;
        let verifiedUsers = new Set();

        // ============ UTILS ============
        function showToast(msg, type = 'success') {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.style.borderLeftColor = type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#f59e0b';
            toast.innerHTML = `<p class="font-bold">${msg}</p>`;
            document.getElementById('toast-container').appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // ============ TAB SWITCHING ============
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
            document.getElementById(tabId + '-tab').classList.remove('hidden');
            
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
            
            const tab = document.querySelector(`.tab[data-tab="${tabId}"]`);
            const nav = document.querySelector(`.nav-item[data-nav="${tabId}"]`);
            if (tab) tab.classList.add('active');
            if (nav) nav.classList.add('active-nav');
            
            // Load data
            if (tabId === 'home') loadHomeData();
            if (tabId === 'profile') loadProfileData();
            if (tabId === 'marketplace') loadProducts();
            if (tabId === 'manager') loadMyItems();
            if (tabId === 'admin' && isAdminMode) loadAdminData();
            if (tabId === 'academics') loadStudyGroups();
            if (tabId === 'community') {
                loadAnnouncements();
                loadExecutives();
            }
        }

        // ============ LOAD VERIFIED USERS ============
        async function loadVerifiedUsers() {
            const snap = await db.collection('VerifiedUsers').get();
            verifiedUsers.clear();
            snap.forEach(d => verifiedUsers.add(d.id));
        }

        // ============ HOME ============
        async function loadHomeData() {
            await loadVerifiedUsers();
            const user = await db.collection('Users').doc(currentUserId).get();
            if (user.exists) {
                document.getElementById('home-user-name').innerText = user.data().name || 'Student';
            }
            
            const products = await db.collection('Products').get();
            const announcements = await db.collection('announcements').get();
            document.getElementById('stat-items').innerText = products.size;
            document.getElementById('stat-announcements').innerText = announcements.size;
        }

        // ============ PROFILE ============
        async function loadProfileData() {
            await loadVerifiedUsers();
            document.getElementById('profile-id').innerText = currentUserId;
            
            const user = await db.collection('Users').doc(currentUserId).get();
            if (user.exists) {
                const data = user.data();
                document.getElementById('profile-name').innerText = data.name || 'Your Name';
                document.getElementById('profile-name-input').value = data.name || '';
                document.getElementById('profile-email').value = data.email || '';
                if (data.phone) {
                    document.getElementById('profile-phone').value = data.phone.replace('+234', '');
                }
                document.getElementById('profile-dept').value = data.dept || '';
                document.getElementById('profile-level').value = data.level || '';
                document.getElementById('profile-bio').value = data.bio || '';
                document.getElementById('hide-email').checked = data.hideEmail || false;
                document.getElementById('hide-dept').checked = data.hideDept || false;
                if (data.photo) document.getElementById('profile-pic').src = data.photo;
            }
            
            // Check if creator
            if (currentUserId === CREATOR_USER_ID) {
                document.getElementById('creator-section').classList.remove('hidden');
                document.getElementById('admin-creator-section').classList.remove('hidden');
            }
            
            // Load portfolio
            const portfolio = await db.collection('AppData').doc('Portfolio').get();
            if (portfolio.exists) {
                const p = portfolio.data();
                document.getElementById('portfolio-url').value = p.url || '';
                document.getElementById('portfolio-image').value = p.image || '';
                document.getElementById('creator-portfolio-link').href = p.url || '#';
                
                if (p.url) {
                    document.getElementById('creator-portfolio-display').classList.remove('hidden');
                    document.getElementById('display-portfolio-link').href = p.url;
                    if (p.image) {
                        document.getElementById('display-portfolio-image').src = p.image;
                    } else {
                        document.getElementById('display-portfolio-image').src = 'https://ui-avatars.com/api/?name=Portfolio&background=10b981&color=fff&size=64';
                    }
                }
            }
        }

        // ============ STUDY GROUPS ============
        async function loadStudyGroups() {
            const container = document.getElementById('study-groups');
            const snap = await db.collection('studyGroups')
                .where('status', '==', 'approved')
                .orderBy('createdAt', 'desc')
                .get();
            
            let html = '';
            snap.forEach(doc => {
                const g = doc.data();
                html += `
                    <div class="p-4 bg-input rounded-lg">
                        <h4 class="font-bold">${g.name}</h4>
                        <p class="text-sm mt-1">${g.description}</p>
                        <a href="${g.whatsappLink}" target="_blank" class="btn-whatsapp text-sm mt-2 inline-block px-4 py-2 rounded-lg">
                            <i class="fab fa-whatsapp"></i> Join WhatsApp Group
                        </a>
                        ${g.createdBy === currentUserId ? `
                            <button class="delete-btn ml-2" onclick="deleteStudyGroup('${doc.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        ` : ''}
                    </div>
                `;
            });
            container.innerHTML = html || '<p class="text-muted">No study groups yet</p>';
        }

        async function createStudyGroup() {
            const name = prompt('Enter group name:');
            if (!name) return;
            const desc = prompt('Enter description:');
            if (!desc) return;
            const link = prompt('Enter WhatsApp group link:');
            if (!link) return;
            
            await db.collection('studyGroups').add({
                name, description, whatsappLink: link,
                createdBy: currentUserId,
                status: 'pending',
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });
            showToast('Group submitted for approval!');
        }

        async function deleteStudyGroup(id) {
            if (confirm('Delete this group?')) {
                await db.collection('studyGroups').doc(id).delete();
                showToast('Group deleted');
                loadStudyGroups();
            }
        }

        // ============ PRODUCTS ============
        async function loadProducts() {
            const container = document.getElementById('product-grid');
            const snap = await db.collection('Products')
                .where('IsSold', '==', false)
                .orderBy('CreatedAt', 'desc')
                .get();
            
            let html = '';
            snap.forEach(doc => {
                const p = doc.data();
                html += `
                    <div class="product-card" onclick="viewProduct('${doc.id}')">
                        <img src="${p.ImageURL}" class="w-full h-40 object-cover">
                        <div class="p-3">
                            <h3 class="font-bold">${p.Title}</h3>
                            <p class="text-primary font-bold">‚Ç¶${p.Price?.toLocaleString()}</p>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html || '<p class="text-muted">No items</p>';
        }

        // ============ ADMIN ============
        function toggleAdminMode() {
            const pwd = prompt('Enter admin password:');
            if (pwd === 'junior123') {
                isAdminMode = !isAdminMode;
                document.getElementById('admin-panel').classList.toggle('hidden');
                document.getElementById('admin-toggle').innerHTML = isAdminMode ? 
                    '<i class="fas fa-lock-open"></i> Admin: ON' : 
                    '<i class="fas fa-lock"></i> Admin: OFF';
                if (isAdminMode) loadAdminData();
            }
        }

        async function loadAdminData() {
            // Load pending groups
            const pending = await db.collection('studyGroups')
                .where('status', '==', 'pending')
                .get();
            let html = '';
            pending.forEach(doc => {
                const g = doc.data();
                html += `
                    <div class="p-3 bg-input rounded-lg">
                        <p class="font-bold">${g.name}</p>
                        <p>${g.description}</p>
                        <a href="${g.whatsappLink}" target="_blank">View Link</a>
                        <div class="flex gap-2 mt-2">
                            <button class="btn-success text-sm py-1 px-3" onclick="approveGroup('${doc.id}')">Approve</button>
                            <button class="btn-danger text-sm py-1 px-3" onclick="rejectGroup('${doc.id}')">Reject</button>
                        </div>
                    </div>
                `;
            });
            document.getElementById('pending-groups-list').innerHTML = html || '<p>No pending groups</p>';
        }

        async function approveGroup(id) {
            await db.collection('studyGroups').doc(id).update({ status: 'approved' });
            showToast('Group approved!');
            loadAdminData();
        }

        async function rejectGroup(id) {
            await db.collection('studyGroups').doc(id).delete();
            showToast('Group rejected');
            loadAdminData();
        }

        // ============ EVENT LISTENERS ============
        document.addEventListener('DOMContentLoaded', () => {
            // Tab switching
            document.querySelectorAll('.tab[data-tab]').forEach(t => {
                t.addEventListener('click', () => switchTab(t.dataset.tab));
            });
            
            document.querySelectorAll('.nav-item[data-nav]').forEach(n => {
                n.addEventListener('click', () => switchTab(n.dataset.nav));
            });
            
            // Create study group
            document.getElementById('create-study-group')?.addEventListener('click', createStudyGroup);
            
            // Admin toggle
            document.getElementById('admin-toggle')?.addEventListener('click', toggleAdminMode);
            
            // Dark mode
            document.getElementById('dark-mode-toggle')?.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                document.getElementById('dark-icon').className = 
                    document.documentElement.classList.contains('dark') ? 'fas fa-sun' : 'fas fa-moon';
            });
            
            // Install PWA
            let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                document.getElementById('install-btn').style.display = 'flex';
            });
            
            document.getElementById('install-btn')?.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    await deferredPrompt.userChoice;
                    deferredPrompt = null;
                    document.getElementById('install-btn').style.display = 'none';
                }
            });
            
            // Start
            switchTab('home');
        });
    </script>
</body>
</html>
